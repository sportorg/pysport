# Список изменений

## 2025-06-19 v1.7.2

### Добавление
+ Новое поле - отчество участника (по новым требованиям ЕВСК), также его обработка при импорте и экспорте
+ Дополнительный импорт/экспорт полной даты рождения, а не только года рождения
+ Вариативная сборка на Pyside2 (Qt5) / Pyside6 (Qt6)
+ Импорт из формата SFRX (SFR)
+ Индексация дистанций по имени для быстрого поиска (актуально для эстафет)
+ Оператор "в списке" для фильтрации таблиц
+ Добавлены столбцы: дата рождения и дистанция в участниках, комментарий в результатах, контрольное время и интервал старта в группах ([#500](https://github.com/sportorg/pysport/issues/500))
+ Окончание контрольного времени участников ([#501](https://github.com/sportorg/pysport/issues/501))
+ Номера участников в эстафетном формате (15.1, [#501](https://github.com/sportorg/pysport/issues/501))
+ Обратная нумерация строк во вкладке результатов ([#519](https://github.com/sportorg/pysport/issues/519))

### Исправление
+ Исправлена работа типа соревнований "многодневная гонка" - при открытии базы все дни перепроверяются
+ Исправления работы чтения SRPid, ошибка преобразования байтов
+ Исправлен импорт WDB с "мусором" в полях Дистанция.Биатлон (спецсимволы)
+ Исправлен импорт из буфера обмена - последняя строка не попадала в таблицу импорта
+ Исправлен импорт дистанций из IOF XML с некорректным набором высоты (Purple Pen)
+ Вернули фиксированные размеры диалоговых окон, динамический режим не всегда корректно работал и появлялись скроллбары
+ Ввод шахматки - проверка номера на существование
+ Исправлена индексация участников при дублировании
+ Подготовка к старту - проверка группы жеребьевки на наличие более 1 участника
+ Исправлена проблема производительности при большом количестве участников ([#494](https://github.com/sportorg/pysport/issues/494))
+ Значение по умолчанию для автосохранения увеличено с 5 секунд до 5 минут ([#497](https://github.com/sportorg/pysport/issues/497))
+ Добавлена устойчивость (не меняется взаимное положение строк с одинаковым значением) при сортировке таблиц ([#500](https://github.com/sportorg/pysport/issues/500))
+ Исправлена ошибочная очистка файла сохранением или автосохранением, если файл не получилось открыть ([#502](https://github.com/sportorg/pysport/issues/502))
+ Исправлен обратный порядок строк при открытии файла ([#509](https://github.com/sportorg/pysport/issues/509))

## 2025-04-01

+ Добавлена возможность выбрать директорию с шаблонами
+ Исправление не отправляющихся результатов онлайн при отсутствии группы настроек, отвечающих за хронометраж ([#472](https://github.com/sportorg/pysport/issues/472))
+ Добавлена возможность ввода стартовавших номеров
+ Добавлена возможность импорта участников из таблицы (Например Excel)
+ Добавлена настройка номера станции и подсчет отсечки
+ Добавлена возможность сохранения шаблонов в формате CSV
+ Добавлено описание как скачать шаблоны
+ В протокол результатов добавлена точность (десятые, сотые), если указана в настройках ([#481](https://github.com/sportorg/pysport/pull/481))
+ Доработана панель сплитов: добавлены отсечки старта и финиша; добавлены десятые/сотые доли секунд, если указана точность; уменьшен начальный размер панели ([#480](https://github.com/sportorg/pysport/pull/480))
+ Добавлены горячие клавиши для частых операций ([#487](https://github.com/sportorg/pysport/pull/487))
+ Добавлено диалоговое окно для смещения времени КП в считанных чипах ([#485](https://github.com/sportorg/pysport/pull/485))
+ Добавлено логирование продолжительности проверки правильности прохождения ([#485](https://github.com/sportorg/pysport/pull/485), лог-файл `SportOrg/log/sportorg.log`)
+ Обновлены зависимости jinja2, psutil, pywin32, playsound и другие ([#493](https://github.com/sportorg/pysport/pull/493))
+ Отправка сжатых данных в orgeo (gzip)
+ Новый формат настроек (json) с возможностью добавления новых полей без потери совместимости

## 2024-10-07 v1.7.1

### Добавление

+ Добавлена поддержка эстафеты по «международному» принципу, отдельно для каждой группы ([#442](https://github.com/sportorg/pysport/issues/442), [#449](https://github.com/sportorg/pysport/pull/449))
+ Добавлена подсказка подсказка о возможности задать старт/финиш по любому первому/последнему КП ([#446](https://github.com/sportorg/pysport/pull/446))

### Исправление

- Настройка группы `Тип гонки` теперь корректно сохраняется в базе ([#449](https://github.com/sportorg/pysport/pull/449))
- Изменена очерёдность отправки нескольких результатов онлайн: теперь порядок в блоке «последние результаты» на оргео совпадает с порядком в спорторге ([#447](https://github.com/sportorg/pysport/pull/447))
- Перестройка индекса после основных операций удаления/изменения номера или чипа

## 2024-10-04 v1.7.0

+ Восстановление участников из html файла
+ Улучшения программы

- Ускорена скорость работы программы
- Стабильная командная работа

## 2022-09-01 v1.6.0

+ Поддержка отметки RFID Impinj
+ Протоколы суммы по местам и времени (поиск по ФИО и группе)
+ Удаление перегона из сплитов (со смещением времени и пересчетом результатов)
+ В режиме лабиринта участники ищутся в существующей базе по номеру чипа
+ Задание стартового времени - старт нескольких участников на одной минуте
+ Новые форматы экспорта IOF XML v.3
+ Печать распечаток для снятых участников в режиме "любая дистанция"
+ Отправка промежуточных отметок в онлайн (orgeo.ru)
+ Расширен функционал массового редактирования
+ Объединение нескольких результатов в один
+ Печать нескольких распечаток в один документ
+ Формирование имени отчета/протокола по имени шаблона
+ Задание метода округления долей секунд (отбрасывание по умолчанию)
+ Новый ранг ЕВСК 2022
+ Расчет ранга для рогейна
+ Возможность расчета ранга не по всем участникам, а по занявшим первые X мест

- Исправлена отправка эстафет в онлайн (orgeo.ru)
- Игнорирование повторных считываний чипов SFR
- Исправлена ошибка при создании результатов для участников без стартового времени
- Исправлена ошибка импорта участников без квалификации (в/к) в текстовом импорте/экспорте
- Увеличена скорость печати распечаток (через шаблоны)
- Увеличена скорость проверки дублирующихся чипов и имен при импорте
- Исправлена проблема расхода памяти при печати
- Переработан режим командной работы (не совместим со старой версией)
- Увеличено максимальное значение для кода последнего КП с 99 до 999
- Проверка списка значений очков на корректность

## 2019-08-07 v1.5.0

+ Увеличение производительности таблиц (комфортная работа с >1000 строк)
+ Встроенная быстрая печать распечаток с масштабированием
+ Поддержка эстафет 2х2 и подобных
+ Поддержка SPORTident SRR Dongle
+ Возможность объединения отметок в чипе при повторном считывании
+ Информация в распечатках о том, сколько человек может выиграть текущего спортсмена
+ Возможность автоматического создания участников при считывании (лабиринт)
+ Протоколы результатов по дистанциям
+ Автоскролл в протоколах результатов
+ Поиск участника по фамилии
- Время старта каждого этапа эстафеты берется из финиша предыдущего этапа
- Улучшенная поддержка чипов SI-6
- Исправление в word-шаблоне для эстафет (не печаталась последняя команда)
* Изменена модель данных. Для переноса данных в старые версии используйте форматы обмена (xml, wdb)

## 2019-01-18 v1.4.0

+ Добавлен импорт IOF xml для дистанций CourseData
+ Добавлен новый статус "Восстановлен"
+ Добавлена возможность массового редактирования участников
- Расчет очков от времени победителя - не учитывать снятых
- Изменён формат передачи при командной работе. Было `0{}1`, стало `{}`
- Исправлено зависание окна поиска


## 2018-10-08 v1.3.0
+ Статус Дискв. изменён на Непр. отм. (если установлен Дискв., то ометка проверяться не будет)
+ Список чипов для аренды
+ Строки таблиц стали меньше по высоте
+ При удалении участника сохраняется номер в результате
+ Возможность вводить неизвестный номер в результат
+ Возможность переприсвоить результаты по номерам
+ Возможность переприсвоить результаты по номерам чипов
+ Импорт из другого sportorg файла
+ Расчет баллов (рогейн, выбор с ограничением времени или trail-o). Протокол строится не по времени прохождения, а по баллам. Штраф за превышение КВ, разные баллы за разные КП
+ Авто-сохранение по времени
+ Показывается кол-во результатов у участника
+ Появились шаблоны .docx (MS Word)
- Безопасное сохранение (сначала сохраняет в file.sportorg.tmp файл, если всё ок, переименовывает в file.sportorg)
* Появились скрипты для отправки результатов в онлайн

## 2018-06-13 v1.2.0

+ Новые шаблоны
+ Настройки отображения в html файле
+ Шаблоны. Рендеринг с помощью JavaScript
+ Добавлен шаблон (results_live) для просмотра не финишировавших участников
+ Добавлено поле "Аренда чипа" в таблицу результатов
+ Переименована вкладка "Подготовка к старту" в "Участники"
+ Лабиринт. Авто определение дистанции
+ Гандикап. Расчет стартового времени по результатам в группе
+ Возможность проводить многодневные соревнования в одной базе
+ Добавлены субъекты РФ (файл `regions.txt`)
+ Новое отображение сплитов в таблице результатов
+ Имена в файле `names.txt`
- Убраны неиспользуемые настройки
- Исправлена работа с SFR
- Исправлена общая жеребьевка по дистанции

## 2018-04-24 v1.1.1

+ Добавлены поля при печати

## 2018-04-17 v1.1.0

+ Поддержка чтения чипов системы электронной отметки SFR на Windows, http://www.sportsystem.ru. (Выражаем благодарность Александру Курдюмову за поддержку)
+ Поддержка чтения чипов системы электронной отметки Sportiduino, https://github.com/alexandervolikov/sportiduino. (Выражаем благодарность Семёну Якимову за разработку специализированного модуля)
+ Звуковые уведомления при чтении чипов
+ При фильтрации указываются в окне редактирования участника группа и коллектив
+ Подтверждение закрытия программы (в том числе Alt+F4)
+ ФСО-18-2. Убран ЗМС, это только почётное звание
+ Добавлены расшифровки к пунктам снятия
+ ФСО-18-10. Переименован «Протокол мандатной комиссии» –> «Протокол комиссии по допуску»

- Исправлен вывод порядка прохождения кп при рассеве в группе
- Под Linux исправлено автодополнение ".json" при сохранении файла

## 2018-03-16 v1.0.0

+ Выпуск стабильной версии
+ Добавлена возможность выбирать порт для si станции

* Указан environment для шаблонов
* Исправлены недочёты в модели

## 2018-03-06 v0.11.0-rc4

+ Сохранение настроек выполнения разрядов
+ Добавлены статусы для снятия (берутся из внешнего файла), например п.п.3.13.12.2
+ Передача регионов в шаблон результатов
+ Рассчет ранга и выполнения для эстафет
+ Возможность сортировки по номеру, старту и имени при формировании командных выписок
+ Протокол мандатной комиссии
+ Снятие по контрольному времени
+ Улучшение шаблонов - печать информации о дистанции, версии ПО

- Переносы в заголовке информации о соревнованиях
- Онлайн для эстафет адаптирован для orgeo.ru
- Исправлена работа с обычным финишем (F3, только время) при формировании результата
- Исправлена ошибка редактирования номера чипа

## 2018-02-23 v0.11.0-rc3

+ Добавлен режим присвоения чипов
+ Добавлены шаблоны для эстафет (старт/результат)
+ Новый формат хранения данных (.json)
+ Добавлена возможность для многопользовательской работы (клиент/сервер)
+ Кнопка редактировать участника в диалоге результата
+ Статус станции (вкл/выкл)
+ Возможность изменять язык интерфейса
+ Удаление КП из результатов и дистанций
+ Интеграция с Telegram

- Исправлены ошибки
- Исправлена работа поиска
- Доработан онлайн

## 2018-01-25 v0.11.0-rc2

- Исправлены ошибки, повышена производительность
- Исправлена работа фильтра при сохранении
- Стабильная работа sireader-а

+ Добавлена возможность быстро изменять забег участника (Alt + num)
+ Добавлена возможность добавлять результаты со статусом DNS
+ Новые шаблоны для сплитов и результатов
+ Частичная поддержка эстафетных соревнований
+ Реализована не стандартная проверка сплитов

## 2018-01-16 v0.11.0-rc1

* Добавили в модели поле id (uuid4)

+ Реализован поиск по всем полям таблицы
+ Если команда не существует при редактировании участника, то команда создается с введенным названием
+ Выписка по командам
+ Возможность получить старт и финиш с конкретного КП
+ Получение времени с первого и последнего КП (независимо от номера)
+ Онлайн трансляция в Orgeo
+ Расчет очков (2 вида - формула и список)
+ Расчет штрафа для маркированной трассы
+ Расчет командных результатов по коллективам и регионам
+ Поддержка новых разрядных требований ЕСВК 2018-2021
+ Базовая поддержка эстафетных соревнований (режим присвоения номеров, расчет мест)

- Исправлена ошибка во время чтения чипов и печати сплитов

## 2017-12-12 v0.10.0-beta

+ Добавлена возможность редактировать сплиты
+ Поддержка нескольких систем отметок на уровне модели
+ Печать номеров
+ Нумерация строк в таблицах
+ Возможность выбирать шаблоны для сплитов
+ Новый шаблон для сплитов

- Учитывается изменение стартового времени у результата

* Изменена структура проекта

## 2017-11-14 v0.9.0-beta

+ Добавлен номер чипа в диалог редактирования результатов
+ Дополнительные поля при поиске по номеру
+ Проверка при изменении чипа или номера участника, а также группы
+ Адаптивная панель сплитов во вкладке результаты

- Исправлена ошибка при сохранении длины перегонов
- Исправлены авто названия файлов

* Доработки в считывании чипов
* Изменена модель данных (нет полной поддержки старой версии)

## 2017-10-31 v0.8.0-beta

+ Автосохранение при ручном финише и после считки
+ Автоподключение к станции
+ Сохранение последней открытой директории
+ Открытие последних используемых файлов
+ Подменю "Recent files"
+ Новые шаблоны
+ Автоматическая печать распечаток при считывании

- Контекстное меню "Открытие с помощью"
- Общая жеребьевка нескольких групп, бегущих по одной дистанции
- Исправлен импорт сплитов из Winorient

## 2017-10-17 v0.7.2-beta

* Выпуск первой бета версии
